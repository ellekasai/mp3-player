function initAudio(i){var t=i.attr("song"),a=i.text(),e=i.attr("cover"),o=i.attr("album"),u=i.attr("artist");audio=new Audio("music/"+t),$("#title").text(a),$("#album").text(o),$("#artist").text(u),$("#cover-img").attr("style","background-image: url(images/covers/"+e+")"),$("#playlist li").removeClass("active"),i.addClass("active")}function showDuration(){$(audio).bind("timeupdate",function(){var i=$("#duration"),t=parseInt(audio.currentTime%60),a=parseInt(audio.currentTime/60)%60,e;t<10?i.html(a+":0"+t):i.html(a+":"+t),audio.currentTime>0&&(e=Math.floor(100/audio.duration*audio.currentTime)),$("#progress").css("width",e+"%")})}function showTimeLeft(){$(audio).bind("timeupdate",function(){var i=parseInt(audio.duration),t=parseInt(audio.currentTime),a=i-t,e,o,u;e=a%60,o=Math.floor(a/60)%60,u=Math.floor(a/360)%60,e=e<10?"0"+e:e,o=o<10?"0"+o:o,u=u<10?"0"+u:u,$("#timeleft").html(u+":"+o+":"+e)})}var audio;$("#pause-btn").hide(),initAudio($("#playlist li:first-child")),$("#play-btn").click(function(){$("#play-btn").hide(),$("#pause-btn").show(),showDuration(),showTimeLeft(),audio.play()}),$("#pause-btn").click(function(){audio.pause(),$("#play-btn").show(),$("#pause-btn").hide()}),$("#stop-btn").click(function(){audio.pause(),$("#play-btn").show(),$("#pause-btn").hide(),audio.currentTime=0}),$("#next-btn").click(function(){audio.pause();var i=$("#playlist li.active").next();0==i.length&&(i=$("#playlist li:first-child")),initAudio(i),showDuration(),showTimeLeft(),audio.play()}),$("#prev-btn").click(function(){audio.pause();var i=$("#playlist li.active").prev();0==i.length&&(i=$("#playlist li:last-child")),initAudio(i),showDuration(),showTimeLeft(),audio.play()}),$("#volume-slider").change(function(){audio.volume=parseFloat(this.value/10)}),$("#playlist li").click(function(){audio.pause(),initAudio($(this)),$("#play-btn").hide(),$("#pause-btn").show(),showDuration(),showTimeLeft(),audio.play()});