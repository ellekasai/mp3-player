function initAudio(i){var a=i.attr("song"),t=i.text(),o=i.attr("cover"),u=i.attr("artist");audio=new Audio("music/"+a),$(".artist").text(u),$(".title").text(t),$("img.cover").attr("src","images/covers/"+o),$("#playlist li").removeClass("active"),i.addClass("active")}function showDuration(){$(audio).bind("timeupdate",function(){var i=parseInt(audio.currentTime%60),a=parseInt(audio.currentTime/60)%60;i<10&&(i="0"+i),$("#duration").html(a+":"+i);var t=0;audio.currentTime>0&&(t=Math.floor(100/audio.duration*audio.currentTime)),$("#progress").css("width",t+"%")})}var audio;$("#pause").hide(),initAudio($("#playlist li:first-child")),$("#play").click(function(){audio.play(),$("#play").hide(),$("#pause").show(),showDuration()}),$("#pause").click(function(){audio.pause(),$("#play").show(),$("#pause").hide()}),$("#stop").click(function(){audio.pause(),$("#play").show(),$("#pause").hide(),audio.currentTime=0}),$("#next").click(function(){audio.pause();var i=$("#playlist li.active").next();0==i.length&&(i=$("#playlist li:first-child")),initAudio(i),audio.play(),showDuration()}),$("#prev").click(function(){audio.pause();var i=$("#playlist li.active").prev();0==i.length&&(i=$("#playlist li:last-child")),initAudio(i),audio.play(),showDuration()}),$("#playlist li").click(function(){audio.pause(),initAudio($(this)),$("#play").hide(),$("#pause").show(),audio.play(),showDuration()}),$("#volume").change(function(){audio.volume=parseFloat(this.value/10)});